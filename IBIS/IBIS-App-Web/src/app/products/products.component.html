<ion-content class="ion-margin" id="htmlData">
  <!-- < <barcode-scanner-livestream #scanner  (valueChanges)="onValueChanges($event)">
  </barcode-scanner-livestream> -->
 
    <!-- <ion-button (click)="startScan()" [disabled]="!isSupported">
      Scan
    </ion-button> -->


  <div class="contents">
    <ion-icon id="helpIcon" name="help-circle" style="color: #002850;" (click)="showHelp()" matTooltip="Help"></ion-icon>
    <h1>{{title}}</h1>
    <ion-searchbar (keyup)="filter($event)" class="isb" placeholder="Search Products..." showCancelButton="focus" [(ngModel)]="filterTerm" animated></ion-searchbar><br/>
    <table [formGroup]="form" mat-table #orderTable [dataSource]="dataSource" class="mat-elevation-z0">
      <ng-container [matColumnDef]="col.key" *ngFor="let col of columnsSchema">
        <th mat-header-cell  *matHeaderCellDef>
          {{ col.name }}
        </th>
        <td mat-cell *matCellDef="let item" [ngSwitch]="col.key">
          <!-- <ng-container  [ngSwitch]="col.key"> -->
            <ng-container *ngSwitchCase="'category_ID'">
              {{GetCategoryName(item.category_ID)}}
            </ng-container>
            <ng-container  *ngSwitchCase="'subCategory_ID'">
             {{GetSubCategoryName(item.subCategory_ID)}}
            </ng-container>
              <ng-container *ngSwitchCase="'price'">
                  <ng-container *ngIf="!item.edited" >
                      {{item.price}}
                  </ng-container>
                  <ng-container *ngIf="item.edited" >
                    <input mat-input type="number" formControlName="price" [(ngModel)]="price">
                  </ng-container>
                 
                 
                </ng-container>
                <ng-container *ngSwitchCase="'actions'">
                 
                  <ion-button class="light-Btn" *ngIf="!edited && !item.edited" (click)="UpdatePrice(item);item.edited=true;price=item.price"  matTooltip="Update Product Price">Update Price</ion-button>
                  <ion-button class="light-Btn" *ngIf="!edited && !item.edited" (click)="ViewProduct(item)"  matTooltip="View Product">View</ion-button>
                  <ion-button class="red-Btn" *ngIf="!edited && !item.edited" (click)="delete(item.product_ID)" matTooltip="Remove"><ion-icon name="trash-outline"></ion-icon></ion-button>
                  <ion-button class="green-Btn" [disabled]="!form.valid" *ngIf="item.edited" (click)="OnDone(item);item.edited=false">Done</ion-button>
                  <ion-button class="green-Btn" *ngIf="request == 'write-off' || request == 'write-up'" (click)="WriteOffScreen(item)">Select</ion-button>
                  <ion-button class="red-Btn" *ngIf="item.edited || request == 'write-off' || request == 'write-up'" (click)="Cancel();item.edited=false;title='Products';" matTooltip="Remove">Cancel</ion-button>
             
            </ng-container>
            <ng-container *ngSwitchDefault>
              {{item[col.key]}}
            </ng-container>
           
        </td>
          </ng-container>
       
     
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      </table>
      <mat-paginator #paginator
      [pageSize]="10"
      [pageSizeOptions]="[3, 5, 10]"
      showFirstLastButtons
      >
    </mat-paginator>
    
    
    
    
      <ion-button class="light-Btn" (click)="addproduct()">Add product</ion-button>
      <ion-button class="light-Btn" (click)=" AddCategory()">Add Category</ion-button>
      <ion-button class="light-Btn" (click)=" AddSubCategory()">Add SubCategory</ion-button>
      <ion-button class="light-Btn" (click)="generPDF()" >Generate Report</ion-button>
      <ion-button class="light-Btn"  [routerLink]="['/view-write-off']">view write offs</ion-button>
        <ion-button *ngIf="CheckPermission()" class="light-Btn" (click)="request = 'write-off'; edited = 'true';title = 'Select Product to write off'" >Write off</ion-button>
        <ion-button *ngIf="CheckPermission()" class="light-Btn" (click)="request = 'write-up';edited = 'true';title = 'Select Product to write up'" >Write Up</ion-button>
    


  </div>
</ion-content>

